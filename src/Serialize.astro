---
// type Primitive = string | number | boolean | null | undefined;

export interface Props {
    /**
     * The id that the client script will pass to the `deserialize()` function
     */
    id: string;
    /**
     * The data to be serialized and accessed in the client script with `deserialize()`
     */
    data: Record<string, any>;
    /**
     * Custom serializer to be used
     * @param data 
     */
    use?: (data: Record<string, any>) => string;
}
const {id, data, use} = Astro.props;
let serializedData = '{}'
try {
    serializedData = use ? use(data) : JSON.stringify(data);
} catch(err) {
    // extend error for helpful messages and guides
    throw Error('astro-resume ERR:', err)
}
---

<script type="application/json" id={id} set:html={serializedData}></script>